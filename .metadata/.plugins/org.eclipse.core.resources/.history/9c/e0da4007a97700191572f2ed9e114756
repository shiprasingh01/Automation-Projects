package pages;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;

public class DatePickerPage {
	WebDriver driver;
	By datePickerBox = By.xpath("//*[@id='wrapper']/div[2]/div[2]/div[2]/ul/li[3]/a/figure/img");
	By dateBox = By.xpath("//*[@id='datepicker']");
	By currentMonthAndYear = By.xpath("//*[@id='ui-datepicker-div']/div/div");
	By monthChangeButton = By.xpath("//*[@id='ui-datepicker-div']/div/a[2]/span");
	By date = By.xpath("//*[@id='ui-datepicker-div']/table/tbody/tr[4]/td[2]/a");

	public DatePickerPage(WebDriver driver) {
		this.driver = driver;
	}

	public void clickDatePicker() {
		driver.switchTo().frame(1);
		driver.findElement(datePickerBox).click();
	}

	public String getDate(String monthYear) {
		this.clickDatePicker();
		driver.switchTo().frame(driver.findElements(By.tagName("iframe")).get(0));
		WebElement dateTextBox = driver.findElement(dateBox);
		dateTextBox.click();
		String currentMonth = driver.findElement(currentMonthAndYear).getText();
		if(currentMonth == monthYear ){
			driver.findElement(date).click();
		}
		else{
			driver.findElement(monthChangeButton).click();
		}
		String selectedDate = dateTextBox.getText();
		return selectedDate;
		
	}
}
