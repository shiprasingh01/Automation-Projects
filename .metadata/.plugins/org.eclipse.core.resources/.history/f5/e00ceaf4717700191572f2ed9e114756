package tests;

import org.testng.Assert;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

import base.BaseClass;
import pages.DroppablePage;
import pages.FramesAndWindowsPage;
import pages.SignInPage;

public class Tasks extends BaseClass {
	SignInPage signInPage;
	DroppablePage droppablePage;
	FramesAndWindowsPage framesAndWindowsPage;

	@BeforeMethod
	public void testPageTitle() {
		driver = super.driver;
		signInPage = new SignInPage(driver);
		signInPage.signinWithCredentials("bob_test", "test123");
		droppablePage = new DroppablePage(driver);
		framesAndWindowsPage = new FramesAndWindowsPage(driver);
	}

	@Test(description = "dragging and dropping the box", priority = 1)
	public void doTasks() {
		String droppedMessage = droppablePage.getDragAndDropMessage();
		Assert.assertTrue(droppedMessage != null);
		System.out.println("The Message received after dragging the box is :" + droppedMessage);
	}

	@Test(description = "Opening a new window and fetching the text from it", priority = 2)
	public void newWindowMessage() {
		framesAndWindowsPage.getNewWindowMessage();
		Assert.assertTrue(true);

	}

	@AfterMethod
	public void refreshBrowser() {
		driver.manage().deleteAllCookies();
		String baseUrl = "http://way2automation.com/way2auto_jquery/index.php";
		driver.get(baseUrl);
	}

}
